if(typeof pyro=="undefined")var pyro={};jQuery(function(e){pyro.cache={url_titles:{}};e.ajaxSetup({converters:{"text json":function(e){var t=jQuery.parseJSON(e);!jQuery.ajaxSettings.allowEmpty==1&&(t==null||jQuery.isEmptyObject(t))&&jQuery.error("The server is not responding correctly, please try again later.");return t}},data:{csrf_hash_name:e.cookie(pyro.csrf_cookie_name)}});pyro.init=function(){e("<select />").appendTo("nav#primary");e("<option />",{selected:"selected",value:"",text:"Menu"}).appendTo("nav#primary select");e("nav#primary a").each(function(){var t=e(this);e("<option />",{value:t.attr("href"),text:t.text()}).appendTo("nav#primary select")});e("nav#primary select").change(function(){window.location=e(this).find("option:selected").val()});e(".topbar ul li:not(#dashboard-link)").hoverIntent({sensitivity:7,interval:75,over:function(){e(this).find("ul:first:hidden").css({visibility:"visible",display:"none"}).slideDown(400)},timeout:0,out:function(){e(this).parent().find("ul").slideUp(400)}});e(".topbar ul li:has(ul)").children("a").addClass("menu");e(".alert").livequery(function(){e(this).prepend('<a class="close" href="#" data-dismiss="alert">×</a>')});e("a.close").live("click",function(t){t.preventDefault();e(this).fadeTo(200,0);e(this).parent().fadeTo(200,0);e(this).parent().slideUp(400,function(){e(window).trigger("notification-closed");e(this).remove()})});e("#datepicker").datepicker({dateFormat:"yy-mm-dd"});e(".alert").livequery(function(){e(this).fadeIn("slow",function(){e(window).trigger("notification-complete")})});e(".check-all").live("click",function(){var t=e(this),n=e(this).is(".grid-check-all")?e(this).parents(".list-items").find(".grid input[type='checkbox']"):e(this).parents("table").find("tbody input[type='checkbox']");n.each(function(){t.is(":checked")&&!e(this).is(":checked")?e(this).click():!t.is(":checked")&&e(this).is(":checked")&&e(this).click()});e(".table_action_buttons .btn").prop("disabled",!1)});e(".table_action_buttons .btn").prop("disabled",!0);e('input[name="action_to[]"], .check-all').live("click",function(){e('input[name="action_to[]"]:checked, .check-all:checked').length>=1?e(".table_action_buttons .btn").prop("disabled",!1):e(".table_action_buttons .btn").prop("disabled",!0)});e("a.confirm").live("click",function(t){t.preventDefault();var n=e(this).attr("href"),r=e(this).attr("title");if(confirm(r||pyro.lang.dialog_message)){e(this).trigger("click-confirmed");if(e.data(this,"stop-click")){e.data(this,"stop-click",!1);return}window.location.replace(n)}});e(":submit.confirm").live("click",function(t,n){if(n)return!0;t.preventDefault();var r=e(this).attr("title");if(confirm(r||pyro.lang.dialog_message)){e(this).trigger("click-confirmed");if(e(this).data("stop-click")){e(this).data("stop-click",!1);return}e(this).trigger("click",!0)}});e("tbody tr:nth-child(even)").livequery(function(){e(this).addClass("alt")});e("#main, .tabs").livequery(function(){e(this).tabs();e(this).tabs("paging",{cycle:!0,follow:!1})});e("#tabs").livequery(function(){e(this).tabs({select:function(e,t){parent.location.hash=t.tab.hash},load:function(e,t){confirm_links();confirm_buttons()}})});var t=e("#page-header h1 a").text();e("a[rel=modal], a.modal").livequery(function(){e(this).colorbox({width:"60%",maxHeight:"90%",current:t+" {current} / {total}",onComplete:function(){pyro.chosen()}})});e('a[rel="modal-large"], a.modal-large').livequery(function(){e(this).colorbox({width:"90%",height:"95%",iframe:!0,scrolling:!1,current:t+" {current} / {total}",onComplete:function(){pyro.chosen()}})})};pyro.clear_notifications=function(){e(".alert .close").click();return pyro};pyro.add_notification=function(t,n,r){var i={clear:!0,ref:"#content-body",method:"prepend"},s;s=e.isPlainObject(n)?e.extend(i,n):i;s.clear&&pyro.clear_notifications();e(s.ref)[s.method](t);e(window).one("notification-complete",function(){r&&r()});return pyro};pyro.sort_tree=function(t,n,r,i,s,o){o=o||{};t.find("ul").children().hide();var u=function(){t.find("li:has(li:visible)").removeClass().addClass("minus");t.find("li:has(li:hidden)").removeClass().addClass("plus");e(".plus, .minus").find("ul").not(":has(li)").remove();t.find("li:not(:has(ul li))").removeClass();s&&s()};u();e(e.cookie(r)).has("ul").toggleClass("minus plus");e(e.cookie(r)).children("ul").children().show();t.find("li").live("click",function(){e(this).children("ul").children().slideToggle("fast");e(this).has("ul").toggleClass("minus plus");var n=[];t.find("li.minus:visible").each(function(){n.push("#"+this.id)});e.cookie(r,n.join(", "),{expires:1});return!1});var a={delay:100,disableNesting:"no-nest",forcePlaceholderSize:!0,handle:"div",helper:"clone",items:"li",opacity:.4,placeholder:"placeholder",tabSize:25,listType:"ul",tolerance:"pointer",toleranceElement:"> div",update:function(r,s){post={};post.order=t.nestedSortable("toHierarchy");i&&(post.data=i(r,s));u();e.post(SITE_URL+n,post)}};t.nestedSortable(e.extend({},a,o))};pyro.chosen=function(){e("select:not(.skip)").livequery(function(){e(this).addClass("chzn").trigger("liszt:updated");e(".chzn").chosen();e(".chzn-container").each(function(t,n){if(e(n).width()==0){e(n).css("width","236px");e(n).find(".chzn-drop").css("width","234px");e(n).find(".chzn-search input").css("width","200px");e(n).find(".search-field input").css("width","225px")}})})};pyro.generate_slug=function(t,n,r,i){var s,o;e(t).live("keyup",function(){u=e(t).val();if(!u.length)return;r=r||"-";i=i||!1;var o=/[a-z]|[A-Z]|[0-9]|[áàâąбćčцдđďéèêëęěфгѓíîïийкłлмñńňóôóпúùûůřšśťтвýыžżźзäæœчöøüшщßåяюжαβγδεέζηήθιίϊκλμνξοόπρστυύϋφχψωώ]/,u=u.toLowerCase(),a=pyro.foreign_characters,f=new RegExp("["+r+"]+","g"),l=new RegExp("^["+r+"]+|["+r+"]+$","g"),c,h;if(!o.test(u))s=u;else{u=e.trim(u);for(var p=a.length-1;p>=0;p--){c=a[p].search.replace(new RegExp("/","g"),"");h=a[p].replace;u=u.replace(new RegExp(c,"g"),h)}s=u.replace(/[^-a-z0-9~\s\.:;+=_]/g,"").replace(/[\s\.:;=+]+/g,r).replace(f,r).replace(l,"");i&&(s=s.replace(/-+/g,"_"))}e(n).val(s)})};e(document).ajaxError(function(t,n,r,i){pyro.add_notification(e('<div class="alert error">'+i+"</div>"))});e(document).ready(function(){pyro.init();pyro.chosen()});e("#cboxLoadedContent a.cancel").live("click",function(t){t.preventDefault();e.colorbox.close()});e("a.toggle").click(function(){e(this).parent().next(".item").slideToggle(500)});e("#sortable").sortable({placeholder:"dropzone",handle:".draggable",update:function(){var t=e("#sortable").sortable("serialize")}});e("#main a:has(img)").addClass("prettyPhoto");e("a[class^='prettyPhoto']").prettyPhoto();e(".tooltip").tipsy({gravity:e.fn.tipsy.autoNS,fade:!0,html:!0});e(".tooltip-s").tipsy({gravity:"s",fade:!0,html:!0});e(".tooltip-e").tipsy({gravity:"e",fade:!0,html:!0});e(".tooltip-w").tipsy({gravity:"w",fade:!0,html:!0});e(".html_editor").each(function(){CodeMirror.fromTextArea(this,{mode:"text/html",tabMode:"indent",height:"500px",width:"500px"})});e(".css_editor").each(function(){CodeMirror.fromTextArea(this,{mode:"css",tabMode:"indent",height:"500px",width:"500px"})});e(".js_editor").each(function(){CodeMirror.fromTextArea(this,{mode:"javascript",tabMode:"indent",height:"500px",width:"500px"})})});